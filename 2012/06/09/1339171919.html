<!DOCTYPE html>
<html>
  <head>
    <title>
      KS Sample
    </title>
    <meta chearset="UTF-8" />
    <meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" />
    <link href="/css/kickstart.css" media="all" rel="stylesheet" type="text/css" />
    <link href="/style.css" media="all" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/kickstart.js" type="text/javasript"></script>
  </head>
  <body class="elements">
    <div class="callout clearfix">
      <h1>
        びぼーろく（仮）
      </h1>
      <div class="grid">
        <div class="col_12">
          <ul class="tabs right">
            <li>
              <a href="tab_blog"><i class="icon-file"></i>BLOG</a>
            </li>
            <li>
              <a href="tab_socials"><i class="icon-twitter"></i>SOCIALS</a>
            </li>
            <li>
              <a href="https://github.com/kaakaa/middleman-blog-slim-sample/tree/gh-pages"><i class="icon-github"></i>View on Gitub</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col_12"><p>groovyのチュートリアル見ながら遊んでたら、ちょっと思いついたのでやってみた。</p>

<p>~~~~ {.syntax-highlight}
alphabets = "abcdefghijklmnopqrstuvwxyz"
alphabetMap = [:]
(0..alphabets.length()-1).each{ alphabetMap[alphabets[it]] = it }</p>

<p>println alphabetMap
~~~~</p>

<p>結果はこちら。</p>

<pre><code>[a:0, b:1, c:2, d:3, e:4, f:5, g:6, h:7, i:8, j:9, k:10, l:11, m:12, n:13, o:14, p:15, q:16, r:17, s:18, t:19, u:20, v:21, w:22, x:23, y:24, z:25]
</code></pre>

<p>うん、クロージャー便利。</p>

<p>\</p>

<p>んで、これを元にシーザー暗号問題組んでみた。</p>

<p><a href="http://vipprog.net/wiki/exercise.html#h54a0395">Caesar暗号解読</a></p>

<p>\</p>

<p>先に言い訳。</p>

<p>組み終わって何回か動かしてたら、</p>

<pre><code>org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/Users/****/Documents/groovy-1.8.6/sample.groovy: 32: unexpected token: } @ line 32, column 1.
   }
   ^

1 error
</code></pre>

<p>ってなエラーが出た。</p>

<p>グーグル先生に聞いてみると日本語がいけないんだってさ。</p>

<p><a href="http://blog.monochromeroad.com/2009/11/grails-easyb-multiplecompilationerrorse.html">Literal Ice: Grails + easyb
でイミフなエラー(MultipleCompilationErrorsException)が出る件</a></p>

<p>コメント日本語で書いてたので、それを英語にするハメに…。英語できないんで酷いコメントになってます。という言い訳。</p>

<p>\</p>

<p>~~~~ {.syntax-highlight}
message = "qdq-gi.q-a ziatmxxitmdqibtqi-ustbi ri.qmoqrcxi.qbubu zir -ibtqi-qp-qaai ripmymsqkir -ibtqi-qy dmxi ri.cnxuoi rruoumxakir -ibtqiqzmobyqzbkii-q.qmxi -imyqzpyqzbi rixmeaki -puzmzoqai -i-qscxmbu zaimzpir -i btq-iymbbq-a;iz -iatmxximzgi.q-a zinqiuzimzgiemgipuao-uyuzmbqpimsmuzabir -ia. za -uzsiacotiimi.qbubu zj"</p>

<p>alphabets = "abcdefghijklmnopqrstuvwxyz .,-"
alphabetsDouble = alphabets + alphabets</p>

<p>alphabetMap = [:]
(0..alphabets.length()-1).each{ alphabetMap[alphabetsDouble[it]] = it }</p>

<p>// return shifted message
def shift(shiftSize){
    // calculate shiftSize modulo alphabets.length()
    shiftSize = shiftSize % alphabets.size()</p>

<pre><code>shiftedString = ""
// message shift closure 
shiftClosure = { 
    if(message[it]==';'){
        shiftedString += ';'
    } else {
        shiftedString += alphabetsDouble[alphabetMap[message[it]]+shiftSize]
    }
}
(0..message.length()-1).each(shiftClosure)

return shiftedString }
</code></pre>

<p>// find string 'person'
def findPerson(line){
    return line ==~ /.<em>person.</em>/
}</p>

<p>// Decrypt cipher
def decrypt(){
    for(i in 0..alphabets.length()-1){
        shiftedMessage = shift(i)
        if(findPerson(shiftedMessage))
            return shiftedMessage
    }
}
println decrypt()
~~~~</p>

<p>結果。</p>

<pre><code>every person shall have the right of peaceful petition for the redress of damage, for the removal of public officials, for the enactment,  repeal or amendment of laws, ordinances or regulations and for other matters; nor shall any person be in any way discriminated against for sponsoring such  a petition.
</code></pre>

<p>最初は文字列シフトさせる時に、messageのサイズでfor文回す方法ではなく、message.toCharArray().each(～)でやろうとしてた。でも、なんかエラーで出来ないみたい。</p>

<pre><code>Caught: groovy.lang.MissingMethodException: No signature of method: java.lang.String.getAt() is applicable for argument types: (java.lang.Character) values: [q]
Possible solutions: getAt(groovy.lang.Range), getAt(java.util.Collection), getAt(int), getAt(groovy.lang.EmptyRange), getAt(java.util.Collection), getAt(groovy.lang.EmptyRange)
groovy.lang.MissingMethodException: No signature of method: java.lang.String.getAt() is applicable for argument types: (java.lang.Character) values: [q]
Possible solutions: getAt(groovy.lang.Range), getAt(java.util.Collection), getAt(int), getAt(groovy.lang.EmptyRange), getAt(java.util.Collection), getAt(groovy.lang.EmptyRange)
    at sample$_shift_closure2.doCall(sample.groovy:17)
    at sample.shift(sample.groovy:24)
    at sample$shift.callCurrent(Unknown Source)
    at sample.decrypt(sample.groovy:38)
    at sample.run(sample.groovy:43)
</code></pre>

<p>出来たとしても大して綺麗になるわけでもないので、まぁいっか。</p>

<p>\</p>

<p>反省点としてはshiftClosureはもっと簡単にできそう。特に、else文当たりはゴリ押しすぎるなぁ。クロージャーもっと使ったり読んだりしないと。</p>

<p>でも、groovyでは正規表現が使いやすいのはすごく助かる。JavaだとPatternとMatcher用意して、find()でif文かけて…とか面倒だからな。</p>

<p>\</p>

<p>これだけで２時間ぐらいかかってしまった。まぁとりあえず、初クロージャーには良い問題でした。</p>

<p>\</p>

<p>groovyはホントにjava屋さんの軽量言語の入り口として優秀だと思う。基本型に対するメソッドとか調べなくても書けるし。</p>

<p>groobyまだまだ遊べそう。</p>

<p>\</p>

<p>さてさて、これでゆっくりユーロ開幕戦見れる。</p>

<p><a href="http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" /></a></p>

<p><a href="http://twitter.com/share">ツイートする</a></p>

      </div>
      <hr />
      <div class="col_12">
        <div class="col_4">
          <h4>
            Profile
          </h4>
          <img class="align-center" src="http://placehold.it/169x130/4D99E0/ffffff.png&text=full+width" />
          <p>
            live in Yokohama. Software Engineer. Java / Groovy / Ruby / Sinatra / Trac / Jenkins
          </p>
        </div>
        <div class="col_5">
          <h5>
            Recent Articles
          </h5>
          <ul class="alt">
            <li>
              <a href="/2013/10/07/example-article.html">Example Article</a>
            </li>
            <li>
              <a href="/2013/10/06/example-article.html">Example Article</a>
            </li>
            <li>
              <a href="/2013/10/05/example-article.html">Example Article</a>
            </li>
            <li>
              <a href="/2013/09/24/1380029870.html">Githubリポジトリのデフォルトブランチを変更する</a>
            </li>
            <li>
              <a href="/2013/09/15/20130915.html">Sinatraアプリを定期的に実行するために泥臭く行ってみた</a>
            </li>
            <li>
              <a href="/2013/09/10/20130910.html">Node.js(Express)でフィードアグリゲータを作り始め</a>
            </li>
            <li>
              <a href="/2013/09/03/20130903.html">SinatraでFeedAggregator</a>
            </li>
            <li>
              <a href="/2013/08/19/1376919346.html">社内勉強会 - 書籍管理Webシステム</a>
            </li>
            <li>
              <a href="/2013/07/18/1374154333.html">Gitbucket1.2で500エラー</a>
            </li>
            <li>
              <a href="/2013/06/24/20130624.html">社内勉強会 - chef</a>
            </li>
            <li>
              <a href="/2013/06/09/1370708167.html">vagrant&chefで構築した仮想CentOS上JenkinsでGoogle Testを実行</a>
            </li>
          </ul>
        </div>
        <div class="col_3">
          <h5>
            By Year
          </h5>
          <ul class="alt">
            <li>
              <a href="/2013.html">2013</a>(24)
            </li>
            <li>
              <a href="/2012.html">2012</a>(81)
            </li>
            <li>
              <a href="/2011.html">2011</a>(31)
            </li>
          </ul>
        </div>
      </div>
    </div>
    <hr />
    <div class="footer">
      <p>
        &copy; Copyright 2013 kaakaa
      </p>
    </div>
  </body>
</html>