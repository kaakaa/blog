<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8" />
<title>[Mattermost Integrations] Message Attachments</title>


  
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57299975-4"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-57299975-4');
  </script>
  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://blog.kaakaa.dev/index.xml"
  title="kaakaa blog"
/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Mattermost Integrations] Message Attachments"/>
<meta name="twitter:description" content="Mattermost記事まとめ: https://blog.kaakaa.dev/tags/mattermost/ 本記事について Mattermostの統合機能アドベントカレンダーの第9日目の記事です。 本記事では、Matt"/>


  <meta property="og:title" content="[Mattermost Integrations] Message Attachments" />
<meta property="og:description" content="Mattermost記事まとめ: https://blog.kaakaa.dev/tags/mattermost/ 本記事について Mattermostの統合機能アドベントカレンダーの第9日目の記事です。 本記事では、Matt" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.kaakaa.dev/post/mattermost/advent-calendar-2020/day9-message-attachments/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-12-09T00:00:00&#43;09:00" />
<meta property="article:modified_time" content="2020-12-09T00:00:00&#43;09:00" />




<link rel="stylesheet" href="https://blog.kaakaa.dev/fontawesome/css/all.min.css" />

<link
  id="dark-mode-theme"
  rel="stylesheet"
  href="https://blog.kaakaa.dev/css/dark.css"
/>

<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')
  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>

<script src="https://blog.kaakaa.dev/js/main.bundle.js"></script>
<script src="https://blog.kaakaa.dev/js/instantpage.min.js" type="module" defer></script>
<meta name="generator" content="Hugo 0.82.0" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
      <a href="https://blog.kaakaa.dev/" class="nav-logo">
        <img
          src="https://blog.kaakaa.dev/images/icon.png"
          width="50"
          height="50"
          alt="Logo"
        />
      </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/" id="Home"
              ><em class="fas fa-home fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/about/" id="About"
              ><em class="fas fa-user fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/tags/" id="Tags"
              ><em class="fas fa-tag fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/search/" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/index.xml" id="Subscribe"
              ><em class="fas fa-rss fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
          
            <h1>
              [Mattermost Integrations] Message Attachments
            </h1>
          
          
            <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Dec 9, 2020
  
</span>

          
        </div>
      </div>
    </div>
  </header>
  

    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      <p>Mattermost記事まとめ: <a href="https://blog.kaakaa.dev/tags/mattermost/">https://blog.kaakaa.dev/tags/mattermost/</a></p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#本記事について">本記事について</a></li>
    <li><a href="#message-attachmentsの概要">Message Attachmentsの概要</a></li>
    <li><a href="#message-attachmentsの作成">Message Attachmentsの作成</a>
      <ul>
        <li><a href="#attachments-options">Attachments Options</a></li>
        <li><a href="#author-details">Author Details</a></li>
        <li><a href="#titles">Titles</a></li>
        <li><a href="#fields">Fields</a></li>
        <li><a href="#images">Images</a></li>
        <li><a href="#footer">Footer</a></li>
      </ul>
    </li>
    <li><a href="#既知の問題">既知の問題</a></li>
    <li><a href="#さいごに">さいごに</a></li>
  </ul>
</nav><h2 id="本記事について">本記事について</h2>
<p><a href="https://qiita.com/advent-calendar/2020/mattermost-integrations">Mattermostの統合機能アドベントカレンダー</a>の第9日目の記事です。</p>
<p>本記事では、Mattermostの統合機能から投稿を作成する際に、視覚的にリッチな投稿を作成することができるMessage Attachmentsの機能について紹介します。</p>
<p><a href="https://docs.mattermost.com/developer/message-">https://docs.mattermost.com/developer/message-</a>**attachments.html</p>
<h2 id="message-attachmentsの概要">Message Attachmentsの概要</h2>
<p>Message AttachmentsはMattermost上に下記のような投稿を作成するための機能です。（画像は<a href="https://docs.mattermost.com/developer/message-attachments.html">公式ドキュメント</a>より）</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/official-example.png" alt="message attachment"></p>
<p>MattermostではデフォルトでMarkdown記法(設定によってはkatex記法も)をサポートしているため、簡単な見出しやリンクなどは普通の投稿で表すことができますが、多くの情報を通知したい場合、Markdownだと情報量の分だけ投稿が縦に伸びていってしまうため視認性が悪いという問題があります。
そのような場合にMessage Attachmentsを使うことで、より構造化された情報をMattermost上に投稿できるようになります。</p>
<p>Message Attachmentsは、今まで紹介してきたIncoming WebHookやSlash Command、今後紹介予定のREST APIやプラグインなど、Mattermostへ投稿を作成する多くの場合で使用することができます。今回は、Incoming WebHookを利用してMessage Attachmentsを作成する例を紹介していきます。</p>
<h2 id="message-attachmentsの作成">Message Attachmentsの作成</h2>
<p>まず、Incoming WebHook(内向きのウェブフック)のおさらいです。
Incoming WebHookでは、ウェブフックのエンドポイントに下記のようなJSONデータを送信することで、Mattermostに投稿を作成することができました。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;text&#34;: &#34;Hello, Mattermost&#34;
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><p>Message Attachmentsを使う場合、送信するJSONデータに<code>attachment</code>というフィールドを追加します</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;text&#34;: &#34;Hello, Mattermost&#34;,
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;color&#34;: &#34;#FF6600&#34;,
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;message attachments&#34;,
</span><span style="color:#e6db74">    &#34;title&#34;: &#34;This is title&#34;,
</span><span style="color:#e6db74">    &#34;title_link&#34;: &#34;https://github.com/mattermost&#34;
</span><span style="color:#e6db74">  },{
</span><span style="color:#e6db74">    &#34;color&#34;: &#34;#0066FF&#34;,
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;message attachments2&#34;,
</span><span style="color:#e6db74">    &#34;title&#34;: &#34;This is title&#34;,
</span><span style="color:#e6db74">    &#34;title_link&#34;: &#34;https://github.com/mattermost&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><p>上記のコマンドを実行することで、通常のメッセージの下にMessage Attachmentsのメッセージが表示されます。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/first-example.png" alt="example"></p>
<p><code>attachments</code>は複数指定することができ、複数指定した場合は上記のように縦に並んで表示されます。</p>
<p>以降は、<code>attachmenst</code>に指定できるオプションと、その効果を紹介していきます。</p>
<h3 id="attachments-options">Attachments Options</h3>
<h4 id="fallback">fallback</h4>
<p>メッセージが作成された際の通知メッセージを指定します。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-fallback1.png" alt="use fallback"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;fallback&#34;: &#34;This is fallback&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><p>何も指定しない場合はシステムデフォルトのメッセージが表示されます。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-fallback2.png" alt="default fallback"></p>
<h4 id="color">color</h4>
<p>Message Attachmentsの左側に表示されるラインの色を指定します。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-color.png" alt="use color"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;color&#34;: &#34;#FF6600&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><h4 id="pretext">pretext</h4>
<p>Message Attachments領域の上に表示されるテキストを指定します。Markdownや絵文字も使用できます。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-pretext.png" alt="use pretext"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;pretext&#34;: &#34;This is `pretext`&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><p><code>attachments</code>と同時に<code>text</code>フィールドを指定した場合、両方のテキストが表示されます。
また、<code>attachments</code>を複数指定していた場合、<code>pretext</code>はMessage Attachmentsの前にそれぞれ表示されます。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;text&#34;: &#34;This is `text`&#34;,
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;pretext&#34;: &#34;This is first `pretext`&#34;
</span><span style="color:#e6db74">  },{
</span><span style="color:#e6db74">    &#34;pretext&#34;: &#34;This is second `pretext`&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>
</code></pre></div><p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-pretext2.png" alt="use pretext"></p>
<h4 id="text">text</h4>
<p>Message Attachments領域内に表示されるテキストです。こちらもMarkdownや絵文字を利用可能です。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-text.png" alt="use text"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;## This is `text` :smiley: \n**Markdown** can be used.&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><h3 id="author-details">Author Details</h3>
<h4 id="author_name--author_link--author_icon">author_name / author_link / author_icon</h4>
<p>Message Attachmentsの作成者情報を指定します。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-author.png" alt="use author"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;author_name&#34;: &#34;kaakaa&#34;,
</span><span style="color:#e6db74">    &#34;author_link&#34;: &#34;https://github.com/kaakaa&#34;,
</span><span style="color:#e6db74">    &#34;author_icon&#34;: &#34;https://blog.kaakaa.dev/images/avatar.png&#34;,
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;Author Details&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><ul>
<li><code>author_name</code>: <code>attachments</code>の上部に表示される作成者の名前を指定します</li>
<li><code>author_link</code>: <code>attachments</code>の上部に表示される作成者の名前をクリックしたときのリンクを指定します</li>
<li><code>author_icon</code>: <code>attachments</code>の上部に表示される作成者のアイコン画像のURLを指定します</li>
</ul>
<h3 id="titles">Titles</h3>
<h4 id="title--title_link">title / title_link</h4>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-title.png" alt="use title"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;title&#34;: &#34;Attachment Title&#34;,
</span><span style="color:#e6db74">    &#34;title_link&#34;: &#34;https://github.com/kaakaa&#34;,
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;Titles&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><ul>
<li><code>title</code>: <code>attachments</code>の上部に表示されるタイトルを指定します</li>
<li><code>title_link</code>: <code>attachments</code>の上部に表示されるタイトルをクリックしたときのリンクを指定します</li>
</ul>
<p>Author Detailsと同時に指定した場合は、下記のような見た目になります。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-title2.png" alt="use title"></p>
<h3 id="fields">Fields</h3>
<h4 id="title--value--short">title / value / short</h4>
<p>Message Attachmentsの内容を指定します。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-fields.png" alt="use fields"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;Fields&#34;
</span><span style="color:#e6db74">    &#34;fields&#34;: [{
</span><span style="color:#e6db74">      &#34;title&#34;: &#34;Short Field :one:&#34;,
</span><span style="color:#e6db74">      &#34;value&#34;: &#34;This is first **short** field. This is first **short** field. This is first **short** field. This is first **short** field. This is first **short** field. &#34;,
</span><span style="color:#e6db74">      &#34;short&#34;: true
</span><span style="color:#e6db74">    }, {
</span><span style="color:#e6db74">      &#34;title&#34;: &#34;Short Field :two:&#34;,
</span><span style="color:#e6db74">      &#34;value&#34;: &#34;This is second **short** field. This is second **short** field. This is second **short** field. This is second **short** field. This is second **short** field. &#34;,
</span><span style="color:#e6db74">      &#34;short&#34;: true
</span><span style="color:#e6db74">    }, {
</span><span style="color:#e6db74">      &#34;title&#34;: &#34;Long Field :one:&#34;,
</span><span style="color:#e6db74">      &#34;value&#34;: &#34;This is first **long** field. This is first **long** field. This is first **long** field. This is first **long** field. This is first **long** field. &#34;,
</span><span style="color:#e6db74">      &#34;short&#34;: false
</span><span style="color:#e6db74">    }, {
</span><span style="color:#e6db74">      &#34;title&#34;: &#34;Long Field :two:&#34;,
</span><span style="color:#e6db74">      &#34;value&#34;: &#34;This is second **long** field. This is second **long** field. This is second **long** field. This is second **long** field. This is second **long** field. &#34;,
</span><span style="color:#e6db74">      &#34;short&#34;: false
</span><span style="color:#e6db74">    }],
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><ul>
<li><code>title</code>: Fieldsのタイトル部分を指定します。絵文字を利用できます。</li>
<li><code>value</code>: Fieldsの<code>title</code>に続く文字を指定します。Markdown形式で記述できます。</li>
<li><code>short</code>: Fieldの長さをshortにするかどうかを指定します。<code>&quot;short&quot;: true</code>を指定すると、１行に２つのFieldを表示できます。</li>
</ul>
<h3 id="images">Images</h3>
<h4 id="image_url--thumb_url">image_url / thumb_url</h4>
<p>Message Attachmentに表示される画像のURLを指定します.</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-images.png" alt="use images"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;Images&#34;,
</span><span style="color:#e6db74">    &#34;fields&#34;: [
</span><span style="color:#e6db74">      {&#34;title&#34;: &#34;Long Field&#34;, &#34;value&#34;: &#34;This is a long field&#34;, &#34;short&#34;: false},
</span><span style="color:#e6db74">      {&#34;title&#34;: &#34;Short Field&#34;, &#34;value&#34;: &#34;This is a short field&#34;, &#34;short&#34;: true},
</span><span style="color:#e6db74">      {&#34;title&#34;: &#34;Short Field&#34;, &#34;value&#34;: &#34;This is a short field&#34;, &#34;short&#34;: true},
</span><span style="color:#e6db74">      {&#34;title&#34;: &#34;Short Field&#34;, &#34;value&#34;: &#34;This is a short field&#34;, &#34;short&#34;: true}
</span><span style="color:#e6db74">    ],
</span><span style="color:#e6db74">    &#34;image_url&#34;: &#34;https://blog.kaakaa.dev/images/avatar.png&#34;,
</span><span style="color:#e6db74">    &#34;thumb_url&#34;: &#34;https://blog.kaakaa.dev/images/avatar.png&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><ul>
<li><code>image_url</code>: <code>text</code>フィールドと<code>fields</code>フィールドの間に表示される画像のURLを指定します。バナーやチャートのような横長の画像を表示するのに適してします。</li>
<li><code>thumb_url</code>: Message Attachmentsの右上端に表示される画像のURLを指定します。</li>
</ul>
<h3 id="footer">Footer</h3>
<h4 id="footer--footer_link">footer / footer_link</h4>
<p>Message Attachmentsのフッター情報を指定します。</p>
<p><img src="https://blog.kaakaa.dev/images/posts/advent-calendar-2020/day9/example-footer.png" alt="use footer"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BODY<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{
</span><span style="color:#e6db74">  &#34;attachments&#34;: [{
</span><span style="color:#e6db74">    &#34;text&#34;: &#34;Footer&#34;,
</span><span style="color:#e6db74">    &#34;footer&#34;: &#34;sample footer&#34;,
</span><span style="color:#e6db74">    &#34;footer_icon&#34;: &#34;https://blog.kaakaa.dev/images/avatar.png&#34;
</span><span style="color:#e6db74">  }]
</span><span style="color:#e6db74">}&#39;</span>

curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#34;</span>$BODY<span style="color:#e6db74">&#34;</span>  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  http://localhost:8065/hooks/ucw5qjw86jgeum77o1uw8197jr
</code></pre></div><h2 id="既知の問題">既知の問題</h2>
<p>2020/11月時点では、下記の制限があります。</p>
<ul>
<li><code>Footer</code>フィールドのタイムスタンプ(<code>ts</code>)に対応していない</li>
<li>Message Attachmentの内容はMattermostの検索機能で検索できない</li>
</ul>
<h2 id="さいごに">さいごに</h2>
<p>Message Attachmentsの基本的な使い方について紹介しました。
明日は、MattermostのREST APIについて紹介します。</p>



      
        <div class="blog-tags">
          
            <a
              href="https://blog.kaakaa.dev/tags/mattermost/"
              >mattermost</a
            >&nbsp;
          
            <a
              href="https://blog.kaakaa.dev/tags/integration/"
              >integration</a
            >&nbsp;
          
            <a
              href="https://blog.kaakaa.dev/tags/messageattachments/"
              >messageattachments</a
            >&nbsp;
          
        </div>
      
    </article>
    
    
      
  <div id="disqus_thread"></div>
  <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost") return;

            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            var disqus_shortname = 'kaakaa-blog';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  <noscript
    >Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript"
      >comments powered by Disqus.</a
    ></noscript
  >
  <a href="https://disqus.com/" class="dsq-brlink"
    >comments powered by <span class="logo-disqus">Disqus</span></a
  >


    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="https://github.com/kaakaa" name="GitHub">
        <em class="fab fa-github-alt fa-lg"></em>
      </a>
    
       &nbsp;&ndash;&nbsp;
      <a href="https://twitter.com/kaakaa_hoe_prog" name="Twitter">
        <em class="fab fa-twitter fa-lg"></em>
      </a>
    
  

  
    
    
       &nbsp;&ndash;&nbsp; 
      <a class="social-icon" href="https://twitter.com/kaakaa_hoe_prog" name="Qiita">
        <img
          src="https://blog.kaakaa.dev/images/qiita.png"
          alt="Qiita"
        />
      </a>
    
  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://blog.kaakaa.dev/about">Yusuke Nemoto</a>
      &nbsp;&copy;
      2021
      
        &nbsp;/&nbsp;
        <a href="https://blog.kaakaa.dev/">kaakaa blog</a>
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
