<!DOCTYPE html>
<html>
  <head>
    <title>
      KS Sample
    </title>
    <meta chearset="UTF-8" />
    <meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" />
    <link href="/css/kickstart.css" media="all" rel="stylesheet" type="text/css" />
    <link href="/style.css" media="all" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/kickstart.js" type="text/javasript"></script>
  </head>
  <body class="elements">
    <div class="callout clearfix">
      <h1>
        びぼーろく（仮）
      </h1>
      <div class="grid">
        <div class="col_12">
          <ul class="tabs right">
            <li>
              <a href="tab_blog"><i class="icon-file"></i>BLOG</a>
            </li>
            <li>
              <a href="tab_socials"><i class="icon-twitter"></i>SOCIALS</a>
            </li>
            <li>
              <a href="https://github.com/kaakaa/middleman-blog-slim-sample/tree/gh-pages"><i class="icon-github"></i>View on Gitub</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col_12"><p>タイトルが長い。</p>

<p>細かくは覚えてないけど、やったことの備忘録。</p>

<p>\</p>

<h4 id="vagrantchefcentosjenkins">Vagrant&amp;Chefで仮想CentOS(Jenkins入り)を構築</h4>

<p>いろいろ調べながらだったけど、何があったか覚えてないので実行環境だけ残しておきます。</p>

<p>Vagrantfile</p>

<p>~~~~ {.syntax-highlight}
# -<em>- mode: ruby -</em>-
# vi: set ft=ruby :</p>

<p>Vagrant.configure("2") do |config|
  config.vm.box = "base"
  config.vm.box_url = "http://developer.nrel.gov/downloads/vagrant-boxes/CentOS-6.4-x86_64-v20130427.box"
  config.vm.network :private_network, ip: "192.168.50.12"
  config.vm.provision :chef_solo do |chef|
    chef.add_recipe("apache2")
    chef.add_recipe("java")
    chef.add_recipe("jenkins::server")
  end
end
~~~~</p>

<p>Vagrantfileと同じ階層にcookbooksディレクトリを作って、そのなかにopscodeのcookbookを入れました。</p>

<p><a href="https://github.com/opscode-cookbooks">opscode-cookbooks (Opscode Public Cookbooks) ?
GitHub</a></p>

<h4 id="vagrant-ssh">vagrant ssh接続</h4>

<p>ここらへんが一番ハマった気がするけど、結局どう解決したかあんま覚えてない…
\^\^;</p>

<p>まだまだsshへの苦手意識は解消できないようです。</p>

<p><a href="http://chulip.org/entry/2013/03/25/120540">VagrantでVirtualboxの仮想マシンを作成 on Windows -
chulip.org</a></p>

<p><a href="http://d.hatena.ne.jp/okinaka/20120314/1331690987">Windows の MinGW 環境で vagrant ssh するには -
エンジニアきまぐれTips</a></p>

<h4 id="section">仮想環境のセッティング</h4>

<p>本来ならばレシピかするべきなのでしょうが、手作業で必要なものを入れました。</p>

<p>ヘタレです。</p>

<ul>
  <li>
    <table>
      <tbody>
        <tr>
          <td>service httpd</td>
          <td>jenkins start</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>service iptables stop</li>
  <li>yum install -y cmake gcc-c++
    <ul>
      <li>GoogleTestをCentOS上でビルドするため</li>
    </ul>
  </li>
  <li>git
    <ul>
      <li>Jenkinsでのソース取得用に入れましたが、もしかしたらJenkinsのGit
plugin入れるだけで良かったかも</li>
    </ul>
  </li>
</ul>

<h4 id="googletest">GoogleTestのビルド</h4>

<p>下記を参考に</p>

<p><a href="http://studiot.jp/blog/?p=336">Google Testのインストールメモ «
StudioT::DevLog</a></p>

<p>Jenkinsから使うために、GoogleTestのディレクトリは/var/lib配下に移動。</p>

<p>自分はユーザvagrantのホームディレクトリ上にGoogleTestを置いてしまい、Jenkinsで実行しようとしてもPermission
Deniedと言われ、ハマリました。</p>

<h4 id="git">Git</h4>

<p>ホストWindows上で作ったVisualStudioプロジェクトを仮想空間上で取得するために、ホスト上にGitリポジトリを立てました。</p>

<p>やり方は下記参照。</p>

<p><a href="http://thinking-megane.blogspot.jp/2012/07/windowsgit.html">Thinking megane:
WindowsでGit共有リポジトリをさくっと構築</a></p>

<h4 id="jenkinsgoogletest">Jenkins上でGoogleTestを実行</h4>

<p>実行についてはこちらを参照。</p>

<p><a href="http://studiot.jp/blog/?p=340">Google Testを動かしてみる «
StudioT::DevLog</a></p>

<p>テスト結果のxml出力にはここらへんを参考にしました。</p>

<p><a href="http://textt.net/take_cheeze/20110626042525/43">Jenkinsでgoogle-test - Public Notes /
Textt</a></p>

<p><a href="http://srz-zumix.blogspot.jp/2012/03/google-test-jenkins.html">ブログズミ: Google Test を使ってみる - その６（Jenkins
との連携、スキップ対応）</a></p>

<h4 id="section-1">結果</h4>

<p>Jenkinsでの実行コマンド</p>

<pre><code>rm -fr result

g++ -I/var/lib/gtest_mock/gmock-1.6.0/gtest/include KaorunTest2.cpp -o test /var/lib/gtest_mock/gmock-1.6.0/gtest/libgtest_main.a /var/lib/gtest_mock/gmock-1.6.0/gtest/libgtest.a -lpthread

mkdir result

./test --gtest_output="xml:result/"
</code></pre>

<p>\</p>

<p><a href="http://f.hatena.ne.jp/kaakaa_hoe/20130609011331"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/k/kaakaa_hoe/20130609/20130609011331.png" alt="f:id:kaakaa\_hoe:20130609011331p:image" title="f:id:kaakaa_hoe:20130609011331p:image" /></a></p>

<p>\</p>

<hr />

<p>今回やったこととは関係ないけど、MinGWで作った半透明のターミナルウィンドウはモチベーション維持に効果を発揮した。</p>

<p><a href="http://tanakh.jp/posts/2011-11-15-windows-terminal.html">no title</a></p>

<p><a href="http://b.hatena.ne.jp/entry/http://d.hatena.ne.jp" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" /></a></p>

<p><a href="http://twitter.com/share">ツイートする</a></p>

      </div>
      <hr />
      <div class="col_12">
        <div class="col_4">
          <h4>
            Profile
          </h4>
          <img class="align-center" src="http://placehold.it/169x130/4D99E0/ffffff.png&text=full+width" />
          <p>
            live in Yokohama. Software Engineer. Java / Groovy / Ruby / Sinatra / Trac / Jenkins
          </p>
        </div>
        <div class="col_5">
          <h5>
            Recent Articles
          </h5>
          <ul class="alt">
            <li>
              <a href="/2013/10/10/webfrontier_seminar.html">2013年秋 Web開発最前線テックトーク</a>
            </li>
            <li>
              <a href="/2013/10/07/example-article.html">Example Article</a>
            </li>
            <li>
              <a href="/2013/10/06/example-article.html">Example Article</a>
            </li>
            <li>
              <a href="/2013/10/05/example-article.html">Example Article</a>
            </li>
            <li>
              <a href="/2013/09/24/1380029870.html">Githubリポジトリのデフォルトブランチを変更する</a>
            </li>
            <li>
              <a href="/2013/09/15/20130915.html">Sinatraアプリを定期的に実行するために泥臭く行ってみた</a>
            </li>
            <li>
              <a href="/2013/09/10/20130910.html">Node.js(Express)でフィードアグリゲータを作り始め</a>
            </li>
            <li>
              <a href="/2013/09/03/20130903.html">SinatraでFeedAggregator</a>
            </li>
            <li>
              <a href="/2013/08/19/1376919346.html">社内勉強会 - 書籍管理Webシステム</a>
            </li>
            <li>
              <a href="/2013/07/18/1374154333.html">Gitbucket1.2で500エラー</a>
            </li>
            <li>
              <a href="/2013/06/24/20130624.html">社内勉強会 - chef</a>
            </li>
          </ul>
        </div>
        <div class="col_3">
          <h5>
            By Year
          </h5>
          <ul class="alt">
            <li>
              <a href="/2013.html">2013</a>(25)
            </li>
            <li>
              <a href="/2012.html">2012</a>(81)
            </li>
            <li>
              <a href="/2011.html">2011</a>(31)
            </li>
          </ul>
        </div>
      </div>
    </div>
    <hr />
    <div class="footer">
      <p>
        &copy; Copyright 2013 kaakaa
      </p>
    </div>
  </body>
</html>