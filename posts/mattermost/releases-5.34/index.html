<!doctype html><html lang=ja-jp><head><meta charset=utf-8><title>Mattermost 5.34の新機能</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-57299975-4"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-57299975-4')</script><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://blog.kaakaa.dev/index.xml title="kaakaa blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mattermost 5.34の新機能"><meta name=twitter:description content="Mattermost 記事まとめ: https://blog.kaakaa.dev/tags/mattermost/ はじめに 2021/04/15 に Mattermost v5.34.0 がリリースされました。 その後、MySQL を使用している場合に発生する可能性のある問題に対応したパッチバージョ"><link rel=stylesheet href=https://blog.kaakaa.dev/fontawesome/css/all.min.css><link id=dark-mode-theme rel=stylesheet href=https://blog.kaakaa.dev/css/dark.css><script>var darkTheme=document.getElementById('dark-mode-theme'),storedTheme=localStorage.getItem('dark-mode-storage');storedTheme==='dark'?darkTheme.disabled=!1:storedTheme==='light'&&(darkTheme.disabled=!0)</script><script src=https://blog.kaakaa.dev/js/bundle.js></script><script src=https://blog.kaakaa.dev/js/instantpage.min.js type=module defer></script><meta name=generator content="Hugo 0.82.0"></head><body><header><nav class=navbar><div class=nav><ul class=nav-links><li><a href=/ id=Home><em class="fas fa-home fa-lg"></em></a></li><li><a href=/about/ id=About><em class="fas fa-user fa-lg"></em></a></li><li><a href=/tags/ id=Tags><em class="fas fa-tag fa-lg"></em></a></li><li><a href=/search/ id=Search><em class="fas fa-search fa-lg"></em></a></li><li><a href=/index.xml id=Subscribe><em class="fas fa-rss fa-lg"></em></a></li></ul></div></nav><div class=intro-header><div class=container><div class=posts-heading><h1>Mattermost 5.34の新機能</h1></div></div></div></header><div class=container role=main><article class=article class=blog-post><p>Mattermost 記事まとめ: <a href=https://blog.kaakaa.dev/tags/mattermost/>https://blog.kaakaa.dev/tags/mattermost/</a></p><h1 id=はじめに>はじめに</h1><p>2021/04/15 に Mattermost v5.34.0 がリリースされました。<br>その後、MySQL を使用している場合に発生する可能性のある問題に対応したパッチバージョンをリリースしており、MySQL を利用している場合は注意が必要そうです。以下の Changelog を確認し、最新のリリースを利用するようにしてください。</p><p><a href=https://docs.mattermost.com/administration/changelog.html#release-v5-34-feature-release>https://docs.mattermost.com/administration/changelog.html#release-v5-34-feature-release</a></p><p>v5.34.0 へのアップグレード時に実行される DB マイグレーションがタイムアウトすることがあり、この問題については v5.34.1 で解消されています。v5.34.1 にアップグレードする場合、大規模なインスタンスだとマイグレーションに時間がかかる可能性があります。</p><blockquote><p>v5.34.1, released 2021-04-15
Fixed an issue where upgrading to v5.34.0 runs a migration that could cause timeouts on MySQL installations. Upgrading to v5.34.1 may also execute missing migrations that were scheduled for v5.32.0. These additions can be lengthy on very big MySQL (version 5.x) installations.</p></blockquote><p>MySQL のパスワードに特殊文字を使用している場合、Mattermost の開始に失敗する問題への対処が v5.34.2 にて加えられています。</p><blockquote><p>v5.34.2, released 2021-04-17
Fixing an issue where installs with some special characters in the MySQL password will break and fail to start.</p></blockquote><p>本記事は、個人的に気になった新しい機能などを動かしてみることを目的としています。（なので、Enterprise 版限定の機能などについてはリリースノート書いてあることの紹介程度となっています）</p><p>変更内容の詳細については公式のリリースを確認してください。</p><ul><li><a href=https://mattermost.com/blog/mattermost-release-v5-34/>Mattermost v5.34 is now available - Upgrade to the new edition today</a></li><li><a href=https://docs.mattermost.com/administration/changelog.html#release-v5-34-feature-release>Mattermost Changelog — Mattermost 5.34 documentation</a></li></ul><hr><p>各機能の見出し前の記号は、その機能が利用可能なエディションを表しています。</p><ul><li><code>Cloud</code>: <a href=https://mattermost.com/pricing-cloud/>Mattermost Cloud</a></li><li><code>E20/E10</code>: <a href=https://mattermost.com/pricing-self-managed/>Enterprise E20/E10</a></li></ul><p>見出しの前に何もない場合、Team Edition(OSS 版)でも利用可能な機能です。</p><nav id=TableOfContents><ul><li><a href=#cloude20-incident-collaboration-におけるインシデント開始時操作の自動化>(Cloud/E20) Incident Collaboration におけるインシデント開始時操作の自動化</a></li><li><a href=#その他の機能>その他の機能</a><ul><li><a href=#新たなプラグイン-circleci--dice-roller>新たなプラグイン (CircleCI / Dice Roller)</a></li><li><a href=#システム管理者向け非公開チャンネル参加確認ダイアログ>システム管理者向け非公開チャンネル参加確認ダイアログ</a></li><li><a href=#チームサイドバーのテーマカラー>チームサイドバーのテーマカラー</a></li><li><a href=#pprof-によるパフォーマンスモニタリング>pprof によるパフォーマンスモニタリング</a></li></ul></li><li><a href=#その他のトピック>その他のトピック</a><ul><li><a href=#mattermost-ceo-による振り返り>Mattermost CEO による振り返り</a></li></ul></li><li><a href=#おわりに>おわりに</a></li></ul></nav><h2 id=cloude20-incident-collaboration-におけるインシデント開始時操作の自動化>(Cloud/E20) Incident Collaboration におけるインシデント開始時操作の自動化</h2><p>ここ数ヶ月開発が活発な<a href=https://github.com/mattermost/mattermost-plugin-incident-collaboration>Incident Collaboration Plugin</a>に、インシデント開始時の操作を自動化する機能が追加されました。</p><p>Incident Collaboratoin Plugin では、インシデント対応手順を予め Playbook として登録しておき、インシデント発生時に Playbook を元にしたインシデント専用チャンネルを作成することで、インシデント対応の様子を 1 つのチャンネルにまとめることができます。</p><p>今回追加されたのは、インシデント専用チャンネル作成時に自動でそのチャンネルに追加されるメンバを指定しておける機能です。</p><p><img src=https://blog.kaakaa.dev/images/posts/mattermost/releases-5.34/incident-automation.png alt="incident automation"></p><h2 id=その他の機能>その他の機能</h2><h3 id=新たなプラグイン-circleci--dice-roller>新たなプラグイン (CircleCI / Dice Roller)</h3><p>新たなプラグインが紹介されています。</p><h4 id=circleci-plugin>CircleCI Plugin</h4><p><a href=https://mattermost.gitbook.io/circle-ci-plugin/>Mattermost/CircleCI Plugin - Circle CI Plugin</a></p><p>Mattermost と CircleCI を連携するプラグインです。こちらは Mattermost 公式チームによって開発されているようです。</p><ul><li>パイプライン/ワークフローの実行</li><li>Mattermost への通知</li><li>環境変数の管理</li><li>ワークフローメトリクスの取得</li></ul><p>などが Mattermost 上から行えるようです。</p><h4 id=dice-roller>Dice Roller</h4><p><a href=https://mattermost.com/marketplace/dice-roller-plugin/>Dice Roller Plugin - Mattermost - Open-source collaboration, self-managed or SaaS</a></p><p>Dice Roller プラグインは、Mattermost 上でダイスを振ることのできるプラグインです。
<img src=https://blog.kaakaa.dev/images/posts/mattermost/releases-5.34/dice-roller.png alt="dice roller"></p><h3 id=システム管理者向け非公開チャンネル参加確認ダイアログ>システム管理者向け非公開チャンネル参加確認ダイアログ</h3><p>システム管理者が非公開チャンネルにそのリンクから参加しようとした際、確認のためのダイアログが表示されるようになりました。</p><p><img src=https://blog.kaakaa.dev/images/posts/mattermost/releases-5.34/confirm-to-join-private.png alt=confirm-to-join-private></p><h3 id=チームサイドバーのテーマカラー>チームサイドバーのテーマカラー</h3><p>Mattermost UI のテーマカラー指定において、チームサイドバーの部分にもカラー設定が可能になりました。<code>sidebarTeamBarBg</code>という値でサイドバーの色を指定できるようです。</p><p><img src=https://blog.kaakaa.dev/images/posts/mattermost/releases-5.34/theme-teambar.png alt="theme teambar"></p><p>以下で Mattermost のテーマ集が公開されています。ここで公開されているテーマは公式テーマではないため、今回追加された<code>sidebarTeamBarBg</code>が設定されていない可能性があります。</p><p><a href=https://avasconcelos114.github.io/mattermost-themes/>Mattermost Themes</a></p><h3 id=pprof-によるパフォーマンスモニタリング>pprof によるパフォーマンスモニタリング</h3><p>今まで有償版(E20)限定の機能だった<a href=https://docs.mattermost.com/deployment/metrics.html>パフォーマンスモニタリング</a>の機能のうち、<a href=https://docs.mattermost.com/deployment/metrics.html#standard-go-metrics>pprof によるモニタリング機能</a>を Team Edition(OSS 版)でも利用できるようになりました。</p><p>pprof によるモニタリングを行うには、<strong>システムコンソール > パフォーマンスモニタリング > パフォーマンスモニタリングを有効にする</strong> を <strong>有効</strong> に設定する必要があります。</p><p><img src=https://blog.kaakaa.dev/images/posts/mattermost/releases-5.34/performance-monitoring.png alt="performance monitoring"></p><p>設定を変更した後、同じ設定画面で指定してあるポート番号に<code>pprof</code>を使ってアクセスすることで、Mattermost インスタンスのメトリクスを確認できるようになります。</p><pre><code>$ go tool pprof http://localhost:8067/debug/pprof/profile
Fetching profile over HTTP from http://localhost:8067/debug/pprof/profile

channel: open channel: no such file or directory
Fetched 1 source profiles out of 2
Saved profile in /Users/test/pprof/pprof.samples.cpu.001.pb.gz
Type: cpu
Time: Apr 16, 2021 at 5:30pm (JST)
Duration: 30s, Total samples = 50ms ( 0.17%)
Entering interactive mode (type &quot;help&quot; for commands, &quot;o&quot; for options)
(pprof) top
Showing nodes accounting for 50ms, 100% of 50ms total
Showing top 10 nodes out of 13
      flat  flat%   sum%        cum   cum%
      20ms 40.00% 40.00%       30ms 60.00%  runtime.scanobject
      10ms 20.00% 60.00%       10ms 20.00%  github.com/gorilla/websocket.(*Conn).write
      10ms 20.00% 80.00%       10ms 20.00%  runtime.greyobject
      10ms 20.00%   100%       10ms 20.00%  runtime.netpoll
         0     0%   100%       10ms 20.00%  github.com/gorilla/websocket.(*Conn).WriteMessage
         0     0%   100%       10ms 20.00%  github.com/gorilla/websocket.(*messageWriter).flushFrame
         0     0%   100%       10ms 20.00%  github.com/mattermost/mattermost-server/v5/app.(*WebConn).Pump.func1
         0     0%   100%       10ms 20.00%  github.com/mattermost/mattermost-server/v5/app.(*WebConn).writePump
         0     0%   100%       40ms 80.00%  runtime.gcBgMarkWorker
         0     0%   100%       40ms 80.00%  runtime.gcBgMarkWorker.func2
</code></pre><h2 id=その他のトピック>その他のトピック</h2><h3 id=mattermost-ceo-による振り返り>Mattermost CEO による振り返り</h3><p>Mattermost の公式ブログで、今までの Mattermost の活動をどのような思想で進めてきたかについて、Mattermost CEO によって綴られています。</p><p><a href=https://mattermost.com/blog/building-open-source-community/>How We’ve Built an Open Source Community at Mattermost</a></p><p>こちらの記事では、Mattermost がどのようにオープンソースコミュニティを築くために、どのような思想を持って活動してきたのかについて語られています。</p><p><a href=https://mattermost.com/blog/go-to-market-strategy-for-developer-tools/>Building a Go-to-Market Strategy for Developer Tools</a></p><p>こちらの記事では、Mattermost を成長させるための戦略について語られています。</p><h2 id=おわりに>おわりに</h2><p>次の<code>v5.35</code>のリリースは 2021/05/14(Fri)を予定しています。</p><hr><p><a href="https://twitter.com/mattermost_jp?lang=ja">Mattermost 日本語(@mattermost_jp)さん | Twitter</a> で Mattermost に関する日本語の情報を提供しています。</p><div class=blog-tags><a href=https://blog.kaakaa.dev/tags/mattermost/>mattermost</a>&nbsp;
<a href=https://blog.kaakaa.dev/tags/releases/>releases</a>&nbsp;</div></article><div id=disqus_thread></div><script type=text/javascript>(function(){var a,b;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='kaakaa-blog',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><footer><div><a href=https://github.com/kaakaa name=GitHub><em class="fab fa-github-alt fa-lg"></em></a><a href=https://twitter.com/kaakaa_hoe_prog name=Twitter><em class="fab fa-twitter fa-lg"></em></a><a class=social-icon href=https://twitter.com/kaakaa_hoe_prog name=Qiita><img src=https://blog.kaakaa.dev/images/qiita.png width=20 height=20 alt=Qiita></a></div><div class=container><p class="credits copyright"><a href=https://blog.kaakaa.dev/about>Yusuke Nemoto</a>
&nbsp;&copy;
2021
&nbsp;/&nbsp;
<a href=https://blog.kaakaa.dev/>kaakaa blog</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>