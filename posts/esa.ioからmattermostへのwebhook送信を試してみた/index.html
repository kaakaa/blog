<!doctype html><html lang=ja-jp><head><meta charset=utf-8><title>esa.ioからMattermostへのWebhook送信を試してみた</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-57299975-4"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-57299975-4')</script><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://blog.kaakaa.dev/index.xml title="kaakaa blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="esa.ioからMattermostへのWebhook送信を試してみた"><meta name=twitter:description content="はじめに esa.ioのWebhook送信先としてMattermostが選べるようになったので試してみました。 ReleaseNotes/201"><meta property="og:title" content="esa.ioからMattermostへのWebhook送信を試してみた"><meta property="og:description" content="はじめに esa.ioのWebhook送信先としてMattermostが選べるようになったので試してみました。 ReleaseNotes/201"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.kaakaa.dev/posts/esa.io%E3%81%8B%E3%82%89mattermost%E3%81%B8%E3%81%AEwebhook%E9%80%81%E4%BF%A1%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-07-07T23:19:23+09:00"><meta property="article:modified_time" content="2018-07-07T23:19:23+09:00"><link rel=stylesheet href=https://blog.kaakaa.dev/fontawesome/css/all.min.css><link id=dark-mode-theme rel=stylesheet href=https://blog.kaakaa.dev/css/dark.css><script>var darkTheme=document.getElementById('dark-mode-theme'),storedTheme=localStorage.getItem('dark-mode-storage');storedTheme==='dark'?darkTheme.disabled=!1:storedTheme==='light'&&(darkTheme.disabled=!0)</script><script src=https://blog.kaakaa.dev/js/bundle.js></script><script src=https://blog.kaakaa.dev/js/instantpage.min.js type=module defer></script><meta name=generator content="Hugo 0.82.0"></head><body><header><nav class=navbar><div class=nav><a href=https://blog.kaakaa.dev/ class=nav-logo><img src=https://blog.kaakaa.dev/images/icon.png width=50 height=50 alt=Logo></a><ul class=nav-links><li><a href=/ id=Home><em class="fas fa-home fa-lg"></em></a></li><li><a href=/about/ id=About><em class="fas fa-user fa-lg"></em></a></li><li><a href=/tags/ id=Tags><em class="fas fa-tag fa-lg"></em></a></li><li><a href=/search/ id=Search><em class="fas fa-search fa-lg"></em></a></li><li><a href=/index.xml id=Subscribe><em class="fas fa-rss fa-lg"></em></a></li></ul></div></nav><div class=intro-header><div class=container><div class=posts-heading><h1>esa.ioからMattermostへのWebhook送信を試してみた</h1></div></div></div></header><div class=container role=main><article class=article class=blog-post><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#mattermostの設定>Mattermostの設定</a></li><li><a href=#esaioの設定>esa.ioの設定</a></li><li><a href=#通知の確認>通知の確認</a></li></ul></nav><h2 id=はじめに>はじめに</h2><p>esa.ioのWebhook送信先としてMattermostが選べるようになったので試してみました。
<a href=https://docs.esa.io/posts/273>ReleaseNotes/2018/06/21/Discord・Microsoft Teams・MattermostへのWebhookを追加しました - docs.esa.io</a></p><p>使用しているMattermostのバージョンはMattermost v5.1.0-rc1になります。</p><h2 id=mattermostの設定>Mattermostの設定</h2><p>まず、Mattermost側にesa.ioからのWebhookを受け取るための内向きのウェブフックを作成する必要があります。</p><p>Mattermostのメインメニューから<strong>統合機能</strong>を選択します。</p><p>統合機能のメニューから<strong>内向きのウェブフック</strong>を選択し、<strong>内向きのウェブフックを追加する</strong>ボタンを押します。</p><p>ウェブフックを作成する際に必須の項目は<strong>タイトル</strong>と、通知を投稿する<strong>チャンネル</strong>のみですので、この２つは必ず指定してください。その他の情報は必要に応じて指定してください。
入力か完了したら<strong>保存する</strong>ボタンを押します。</p><p>すると、新しい内向きのウェブフックが作成されるため、表示されているURLをコピーしておきます。</p><p>これでMattermost側の設定は完了です。</p><h2 id=esaioの設定>esa.ioの設定</h2><p>次にesa.ioの設定を行います。</p><p><code>https://{team}.esa.io/team/webhooks</code>よりウェブフックのメニューを開き、<strong>Add webhook</strong>ボタンを押します。</p><p>ウェブフックのメニューから<strong>Mattermost</strong>を選択し、<strong>Incoming Webhook URL</strong>に、先ほどコピーしたMattermostの内向きのウェブフックのURLをペースとします。
Labelやチェックボックスなどは必要に応じて変更してください。今回は投稿を作成した際に通知が飛ぶようにするため、**on post create (only ShipIt)**にチェックをしています。</p><p><strong>Save</strong>ボタンを押してウェブフックが作成されたらesa.ioの設定も完了です。</p><h2 id=通知の確認>通知の確認</h2><p>esa.io側のウェブフックの設定を行なった段階で、Mattermostへ通知が飛びます。
Mattermostで内向きのウェブフックを作成した時に選択したチャンネルを開いてみましょう<code>(\( ⁰⊖⁰)/)</code>。</p><p>次に、esa.io側で新しい投稿を作成し、<code>ShipIt</code>します。</p><p>すると、Mattermostの方に通知が飛びます。</p><p>投稿されるメッセージはesa.io側の<code>Change log</code>の内容のようです。
リンクになっている<code>esa.ioへの通知テスト</code>をクリックすると、esa.ioで作成された投稿へ飛ぶことができます。</p><div class=blog-tags><a href=https://blog.kaakaa.dev/tags/esa.io/>esa.io</a>&nbsp;
<a href=https://blog.kaakaa.dev/tags/mattermost/>Mattermost</a>&nbsp;</div></article><div id=disqus_thread></div><script type=text/javascript>(function(){var a,b;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='kaakaa-blog',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><footer><div><a href=https://github.com/kaakaa name=GitHub><em class="fab fa-github-alt fa-lg"></em></a><a href=https://twitter.com/kaakaa_hoe_prog name=Twitter><em class="fab fa-twitter fa-lg"></em></a><a class=social-icon href=https://twitter.com/kaakaa_hoe_prog name=Qiita><img src=https://blog.kaakaa.dev/images/qiita.png width=20 height=20 alt=Qiita></a></div><div class=container><p class="credits copyright"><a href=https://blog.kaakaa.dev/about>Yusuke Nemoto</a>
&nbsp;&copy;
2021
&nbsp;/&nbsp;
<a href=https://blog.kaakaa.dev/>kaakaa blog</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>